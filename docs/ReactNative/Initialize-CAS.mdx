
---

## title: Initialize CAS SDK
Before loading ads, have your app initialize CAS Mobile Ads SDK by calling `CASMobileAds.initialize()` which initializes the SDK and returns a `Promise` that resolves once initialization is complete.

The `casId` is a unique identifier for the CAS content registered for your app on each platform.
You can use the value `demo` to force test ads mode on all devices if you haven't registered a `casId` yet.

```ts
import { Platform } from 'react-native';
import { CASMobileAds } from 'react-native-cas';

async function initCAS() {
  const casId = Platform.OS === 'android' ? 'demo' : 'demo';

  try {
    const status = await CASMobileAds.initialize(casId, {});
    if (status.error) {
      console.log(`CAS Mobile Ads SDK initialization failed: ${status.error}`);
    } else {
      console.log(`CAS Mobile Ads SDK initialized in ${status.countryCode} country`);
    }
  } catch (e) {
    console.error('Initialization error:', e);
  }
}
```

If `initialize()` method is not called, the first ad load automatically initializes the CAS Mobile Ads SDK with the CAS Id defined in ad load arguments.

If an error occurs, the SDK will attempt automatic reinitialization internally. However, the returned `Promise` will not update with subsequent `InitializationStatus`. For the most up-to-date status, call `initialize()` again later.

<Error>  
Do not initialize mediated advertising SDKs (CAS does that for you).  
Not following this step will result in noticeable integration issues.  
</Error>  

---

## Automatic user consent flow
To get consent for collecting personal data of your users, use the built-in **Consent Flow**.
It shows a ready-made consent form automatically during CAS initialization.

The user will see the consent flow when your app initializes the CAS SDK.
Once the user completes the flow, the `initialize()` `Promise` resolves.

You can choose whether to `showConsentFormIfRequired` in the `initialize()` arguments:

```ts
import { CASMobileAds } from 'react-native-cas';

CASMobileAds.initialize('demo', {
  showConsentFormIfRequired: true, // [!code highlight]
}).then((status) => {
  if (status.consentFlowStatus === 3 /* OBTAINED */) {
    console.log('CAS Mobile Ads SDK obtained user consent');
  }
});
```

You must wait until the user finishes the consent flow before initializing third-party SDKs (like MMPs or analytics).
Initialize them inside the completion callback, not before.
Otherwise, they may fail to access identifiers needed for measurement and ad revenue tracking.

<Info>  
Read more about "Privacy options button" and "Debug geography" on [CAS User Consent Flow page](ReactNative/User-Consent-Flow)  
</Info>  

---

## Always test with test ads
When building and testing your apps, make sure you use test ads rather than live, production ads.
Failure to do so can lead to suspension of your account.

By default, CAS initializes mediation in live mode.
To enable test ad mode, manually set `forceTestAds` in the `initialize()` arguments:

```ts
import { CASMobileAds } from 'react-native-cas';

CASMobileAds.initialize('demo', {
  forceTestAds: __DEV__, // [!code highlight]
  testDeviceIds: [
    'YOUR_TEST_DEVICE_ID', // [!code highlight]
  ],
});
```

You can also test in release builds by registering your device as a test device.
Check the logs for your device’s ID value.

For more information about CAS.AI SDK’s test ads, see [Enable test ads](ReactNative/Enabling-test-ads)

---

## Prohibition on Personal Information from Children
Apps can be marked as child-directed or [Children’s Online Privacy Protection Act (COPPA)](https://www.ftc.gov/tips-advice/business-center/privacy-and-security/children%27s-privacy) applicable through the CAS UI.
If the app has knowledge of specific individuals as being COPPA-applicable, it should make use of the `targetAudience` parameter in the `initialize()` function:

```ts
import { Audience, CASMobileAds } from 'react-native-cas';

CASMobileAds.initialize('demo', {
  targetAudience: Audience.NOT_CHILDREN, // [!code highlight]
});
```

If your app targets both children and older users, all ads that may be shown to children must comply with COPPA.
To ensure compliance, implement a **neutral age screen** (e.g., an age gate) that verifies a user’s age without encouraging misrepresentation and prevents children from accessing inappropriate content.

---

## (Optional) Retrieve the Version Number
To programmatically retrieve the SDK version number at runtime:

```ts
const sdkVersion = await CASMobileAds.getSDKVersion();
```

---

## (Optional) Trial ad-free interval
Defines the time interval, in seconds, starting from initial installation, during which users can use the app without ads while still retaining access to Rewarded Ads.

```ts
const secondsIn7Days = 604800;
CASMobileAds.setTrialAdFreeInterval(secondsIn7Days);
```

---

## Complete example
- [Initialize CASMobileAds example]()
