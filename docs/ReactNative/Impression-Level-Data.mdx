---
title: Impression Level Data
---

CAS.AI SDK enables you to access detailed information for each impression through the impression callback APIs.  
The data includes which demand source served the ad and the exact or estimated revenue associated with it.  
This allows you to analyze and optimize your monetization and user acquisition strategies.

### AdContentInfo
The `AdContentInfo` structure contains information about a loaded or displayed ad.  
In React Native, this object is provided to the `onAdImpression` callback for each ad format.

```ts
const unsubscribe = AppOpenAd.addAdImpressionEventListener((info) => {
  console.log('AppOpen impression:', info);
});
```

#### AdContentInfo
The `AdContentInfo` data structure, which contains information about the displayed ad.

<Property name="format" type="string">
  The format of the ad that is shown. (e.g. `Banner`, `MREC`, `Interstitial`, `Rewarded`, `AppOpen`).
</Property>

---

<Property name="sourceName" type="string">
  The display name of the mediated network that purchased the impression.
</Property>

---

<Property name="sourceUnitId" type="string">
  The Ad Unit ID from the mediated network that purchased the impression.
</Property>

---

<Property name="creativeId" type="string" optional>
  The Creative ID associated with the ad, if available.
  You can use this ID to report creative issues to the Ad review team. 
</Property>

---

<Property name="revenue" type="number">
  The revenue generated from the impression, in USD. 
  The revenue value may be either estimated or exact, depending on the precision specified by `revenuePrecision`. 
</Property>

---

<Property name="revenuePrecision" type="string">
  The precision type of the revenue field. (e.g. `estimated`, `precise`, `floor`).
</Property>

---

<Property name="revenueTotal" type="number">
  The accumulated value of user ad revenue in USD from all ad format impressions. 
</Property>

---

<Property name="impressionDepth" type="number">
  The total number of impressions across all ad formats for the current user, across all sessions. 
</Property>


### Ad Impression callback

Each ad format exposes an impression callback with `AdContentInfo` details:

```ts
import {
  AppOpenAd,
  InterstitialAd,
  RewardedAd,
  type AdContentInfo,
} from 'react-native-cas';

function setAdImpressionCallbacks() {
  const unAppOpen = AppOpenAd.addAdImpressionEventListener(onAdImpression);
  const unInterstitial = InterstitialAd.addAdImpressionEventListener(onAdImpression);
  const unRewarded = RewardedAd.addAdImpressionEventListener(onAdImpression);

  return () => {
    unAppOpen();
    unInterstitial();
    unRewarded();
  };
}

function onAdImpression(impression: AdContentInfo) {
  // Called when an ad impression occurs.  
  const adPlatform = 'CAS';
  const adFormat = impression.format;
  const adSource = impression.sourceName;
  const adUnitName = impression.sourceUnitId;
  const value = impression.revenue;
  // All CAS revenue is sent in USD  
  const currency = 'USD';
}
```

For banners, attach the handler directly to the React component:

```tsx
<BannerAdView onAdViewImpression={(info) => onAdImpression(info)} />
```

---

### User ad summary
CAS tracks cumulative impression and revenue metrics that are included in each `AdContentInfo` payload:

```ts
const totalImpressions = impression.impressionDepth;
const totalRevenue = impression.revenueTotal;
```

<Info>
These counters persist between app sessions until the user clears your appâ€™s data.
</Info>

---

## Automatic ad revenue collection
CAS SDK can automatically report ad revenue events to **Google Analytics** and **Tenjin Analytics**.
Contact your account manager for enabling these integrations.

---

### Google Analytics
To measure ad revenue with Google Analytics:

1. [Get started with Firebase Analytics](https://firebase.google.com/docs/analytics/get-started).
2. Link your Firebase project to a Google Analytics account.
3. Use CAS SDK **3.5.0+**.

The SDK automatically logs [`ad_impression`](https://firebase.google.com/docs/reference/android/com/google/firebase/analytics/FirebaseAnalytics.Event#public-static-final-string-ad_impression)
events whenever an ad is displayed.
Events include parameters such as ad platform, source, currency, and value.
Alternatively, CAS may log the event as `CAS_Impression`.

---

### Tenjin
1. [Integrate the Tenjin Android SDK](https://docs.tenjin.com/docs/android-sdk#basic-integration).
2. Ensure a Tenjin session is initialized, **or** pass your key to CAS SDK so it initializes Tenjin automatically:

   ```ts
   CASMobileAds.initialize('YOUR_CAS_ID', {
     mediationExtras: { tenjin_key: TENJIN_SDK_KEY },
   });
   ```
3. Use CAS SDK **3.7.2+**.


